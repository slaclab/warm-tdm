****************************
SaTuneProcess
****************************

| Process which performs an SA tuning step.
| This tuning process sweeps the SaFb value and determines the SaOffset value required zero out the SaOut value.
| This sweep is repeated for a series of SaBias values.
| Once the sweep is completed the process will determine the SaBias value which results in the largest peak to peak amplitude in the SaFb vs SaOffset curve.
| For the select SaBias curce the process will then select the point on the curve with the highest slope.
| The resulting curves are available as a dictionary of numpy arrays.


Summary
#######

Variable List
*************

* Running
* Progress
* Message
* SaFbLowOffset
* SaFbHighOffset
* SaFbNumSteps
* SaFbSampleDelay
* SaBiasLowOffset
* SaBiasHighOffset
* SaBiasNumSteps
* SetAfterFinish
* SaTuneOutput

Command List
*************

* Start
* Stop

Details
#######

Variables
*********

.. topic:: GroupRoot.Group.SaTuneProcess.Running

    | Status values indicating if operation is running.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |Running                                                                                             |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.Running                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |enum                                                                                                |{False: 'False', True: 'True'}                                                                      |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |bool                                                                                                |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |enum                                                                                                |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |0                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RO                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.Progress

    | Percent complete: 0 - 100 %.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |Progress                                                                                            |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.Progress                                                              |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |float                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{:1.2f}                                                                                             |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |2                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RO                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |units                                                                                               |Pct                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |minimum                                                                                             |0.0                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |maximum                                                                                             |1.0                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.Message

    | Process status message.
    | Prefixed with 'Error:' if an error occurred.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |Message                                                                                             |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.Message                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |str                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |0                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RO                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaFbLowOffset

    | Starting point offset for SA FB Tuning.
    | This value is an offset from the currently configured SaFb value.
    | (well not in the current code, but it should be).


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaFbLowOffset                                                                                       |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaFbLowOffset                                                         |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |float                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |8                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaFbHighOffset

    | Ending point offset for SA FB Tuning.
    | This value is an offset from the currently configured SaFb value.
    | (well not in the current code, but it should be).


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaFbHighOffset                                                                                      |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaFbHighOffset                                                        |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |float                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |8                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaFbNumSteps

    | Number of steps between the SaFbLowOffset and SaFbHighOffset, inclusively.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaFbNumSteps                                                                                        |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaFbNumSteps                                                          |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |int                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |0                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |minimum                                                                                             |1                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |maximum                                                                                             |10000                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaFbSampleDelay

    | Wait time between FB set and SA Out sampling in seconds.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaFbSampleDelay                                                                                     |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaFbSampleDelay                                                       |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |float                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |8                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaBiasLowOffset

    | Starting point offset for SA Bias Tuning.
    | This value is an offset from the currently configured SaBias value.
    | (well not in the current code, but it should be).


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaBiasLowOffset                                                                                     |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaBiasLowOffset                                                       |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |float                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |8                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaBiasHighOffset

    | Ending point offset for SA Bias Tuning.
    | This value is an offset from the currently configured SaBias value.
    | (well not in the current code, but it should be).


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaBiasHighOffset                                                                                    |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaBiasHighOffset                                                      |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |float                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |8                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaBiasNumSteps

    | Number of steps between the SaBiasLowOffset and SaBiasHighOffset, inclusively.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaBiasNumSteps                                                                                      |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaBiasNumSteps                                                        |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |int                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |0                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |minimum                                                                                             |1                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |maximum                                                                                             |10                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SetAfterFinish

    | This variale controls if the tuning point found at the end of the process is set back.
    | Otherwise the previous values of SaFb and SaBias will be restored.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SetAfterFinish                                                                                      |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SetAfterFinish                                                        |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |enum                                                                                                |{False: 'False', True: 'True'}                                                                      |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |bool                                                                                                |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |enum                                                                                                |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |0                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RW                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.SaTuneOutput

    | Results Data From SA Tuning.
    | This is a list of dictionaries, with one dictionary for each column in the system (ColumBoards * 8).
    | Each dctionary contains the following fields:.
    | xValues: x-axis values (SaFb) for each curve.
    | biasValues: array of SaBias values, one for each SaBias step.
    | curves: SaOffset vs SaFb curves, one for each SaBias value.
    | biasOut: Selected SaBias value after fitting.
    | fbOut: Selected SaFb value after fitting.
    | offsetOut: Selected SaOffset out value after fitting.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |SaTuneOutput                                                                                        |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.SaTuneOutput                                                          |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |dict                                                                                                |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |precision                                                                                           |0                                                                                                   |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |mode                                                                                                |RO                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

Commands
********

.. topic:: GroupRoot.Group.SaTuneProcess.Start

    | Start process.
    | No Args.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |Start                                                                                               |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.Start                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |int                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

.. topic:: GroupRoot.Group.SaTuneProcess.Stop

    | Stop process.
    | No Args.


    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |Field                                                                                               |Value                                                                                               |
    +====================================================================================================+====================================================================================================+
    |name                                                                                                |Stop                                                                                                |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |path                                                                                                |GroupRoot.Group.SaTuneProcess.Stop                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |typeStr                                                                                             |int                                                                                                 |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+
    |disp                                                                                                |{}                                                                                                  |
    +----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------+

